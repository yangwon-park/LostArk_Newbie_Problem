# LostArk Newbie Problem

## ê¸°íš ì´ìœ 

íŠ¹ì •í•œ ê²Œì„ì— ìœ ì €ë“¤ì˜ ë¡œì—´í‹°ê°€ ì¶©ë¶„í•œ ê²½ìš° ê·¸ ìœ ì €ë“¤ì€ ë‹¤ë¥¸ ê²Œì„ì„ í•˜ë‹¤ê°€ë„ ê²°êµ­ì—” ê·€ì†Œ ë³¸ëŠ¥ì²˜ëŸ¼ ë‹¤ì‹œ ìì‹ ì´ ì¬ë°Œì–´í•˜ê³  ì¦ê²¨í•˜ë˜ ê·¸ ê²Œì„ìœ¼ë¡œ ëŒì•„ì˜¤ëŠ” ê²ƒì„ ë§ì´ ëª©ê²©í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì°¸ê³ ë¡œ ë´¤ì„ ë•Œ ê¸°ì¡´ ìœ ì €ë“¤ì„ ë¶™ì¡ì•„ ë‘ëŠ” ê²ƒë„ ì¤‘ìš”í•˜ì§€ë§Œ, ê²Œì„ì˜ ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†ŒëŠ” **ì‹ ê·œ ìœ ì €ë“¤ì˜ ë¦¬í…ì…˜**ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.

<center><h5>(ì ˆëŒ€ ê¸°ì¡´ ìœ ì €ë¥¼ ë“±í•œì‹œ í•˜ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤!)</h5></center>

ì •ë§ ë§ì€ ë¶„ë“¤ì´ ê²Œì„ì„ ì·¨ë¯¸ë¡œ ê°€ì§€ê³  ì—¬ê°€ ì‹œê°„ì„ ë³´ë‚´ëŠ”ë°, ìƒê°ë³´ë‹¤ ë§ì€ ìœ ì €ë¶„ë“¤ì´ ë‰´ë¹„ì¼ ë•Œ ì§„ì… ì¥ë²½ì„ í¬ê²Œ ëŠê»´ ì´ˆê¸° ì½˜í…Œì¸ ì—ì„œë¶€í„°ì˜ ì´íƒˆë¥ ì´ ë†’ìŠµë‹ˆë‹¤. ì € ë˜í•œ ë§ì€ ê²Œì„ì„ ì ‘í•´ë³´ì•˜ê³  ìŠ¤ìŠ¤ë¡œ í—¤ë¹„í•œ ê²Œì´ë¨¸ë¼ê³  ìƒê°í•˜ëŠ” í¸ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¸ëŸ° ì €ì™€ ì œ  ì£¼ë³€ ì§€ì¸ë“¤ë„ ìƒˆë¡œìš´ ê²Œì„ì— ë„ì „ í•  ë•Œ ë§‰ë§‰í•¨ê³¼ ë‘ë ¤ì›€ì´ ëŠê»´ì§‘ë‹ˆë‹¤.

---

<span style="font-size:120%">ìµœê·¼ 'ë¡œìŠ¤íŠ¸ì•„í¬'ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ë ¤ëŠ” ìœ ì €ì˜ ì…ì¥ì—ì„œ ì¶œì‹œê°€ ê·¸ë ‡ê²Œ ì˜¤ë˜ë˜ì§€ ì•Šì•˜ê³  ê²Œì„ì˜ UIê°€ í¬ê²Œ ë¶ˆí¸í•˜ì§€ ì•Šì•˜ìŒì—ë„ ìƒê°ë³´ë‹¤ ì‰½ê²Œ ê²Œì„ì— ì ì‘í•˜ì§€ ëª»í•˜ëŠ” ì œ ëª¨ìŠµì´ ë³´ì˜€ìŠµë‹ˆë‹¤.</span>

---

ì´ì— ë”°ë¼ ë‰´ë¹„ë“¤ì´ ëŠë¼ëŠ” ë¬¸ì œì ì„ íŒŒì•…í•˜ê³  ë¶„ì„í•˜ì—¬ ì €ì™€ ì œ ì§€ì¸ë“¤ì€ ë¬¼ë¡  ì •ë§ ë§ì€ ê²Œì´ë¨¸ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ë˜ê³  ê²Œì„ ê¸°ì—…ì˜ ì…ì¥ì—ì„œ ì–´ë–»ê²Œ í•˜ë©´ **ìœ ì € ë¦¬í…ì…˜**ì„ ë†’ì¼ ìˆ˜ ìˆì„ì§€ ê³µë¶€í•´ë³´ê³ ì ì´ í”„ë¡œì íŠ¸ë¥¼ ê¸°íší•˜ê²Œ ëìŠµë‹ˆë‹¤.

<br/>

## ê¸°ìˆ  ìŠ¤íƒ ë° ë²„ì „

- OS : Windows 10

- Anaconda (ê°€ìƒí™˜ê²½ ì´ë¦„ : 3_7)
- IDE : **Jupter Notebook**
- Python 3.7 (Mecabì´ 3.8 ì´ìƒ ì§€ì› ì•ˆ í•¨)
  - BeautifulSoup (4.10.0)
  - Selenium (4.1.0)
  - pandas (1.3.4)
  - numpy (1.19.5)
- ìì—°ì–´ ì²˜ë¦¬
  - KoNLPy - Mecab (ì„¤ì¹˜ ë°©ë²• ì•„ë˜ ì°¸ê³ )
    - jdk 1.8
    - JPype1-1.3.0-cp37-cp37-win_amd64.whl
    - mecab_python-0.996_ko_0.9.2_msvc-cp37-cp37m-win_amd64.whl
    - mecab-ko-msvc (0.9.2)
    - mecab-ko-dic-mscv (2.1.1)

  - PyKoSpacing - Spacing (ë„ì–´ì“°ê¸° ì²˜ë¦¬)
    - numpy 1.20 ë„˜ìœ¼ë©´ Tensoflow ë¯¸ì§€ì›ìœ¼ë¡œ ì—ëŸ¬ ë°œìƒ

- VCS  : Github

## ì°¸ê³  ì‚¬ì´íŠ¸ (ì¶”ê°€ ì˜ˆì •)

<span style="font-size: 300%">ğŸ‘¨â€âœˆï¸</span>Robots.txt ì°¸ê³ í•˜ì—¬Â ìŠ¤í¬ë˜í•‘í•˜ì˜€ì§€ë§Œ í˜¹ì‹œ ë¬¸ì œê°€ ëœë‹¤ë©´ ë§ì”€í•´ì£¼ì„¸ìš”!!!

- [LostArk ì¸ë²¤ - ì§ˆë¬¸ê³¼ ë‹µë³€ ê²Œì‹œíŒ](https://www.inven.co.kr/board/lostark/4822)
- [LostArk ê³µí™ˆ - Q&A ê²Œì‹œíŒ](https://lostark.game.onstove.com/Library/Qa/List)



## ê°œë°œ ê³¼ì •

### 00. ê¸°ë³¸ ê°œë°œí™˜ê²½ êµ¬ì„±

```python
import time, random
import requests, re, csv
from datetime import datetime
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from bs4 import BeautifulSoup

# ë¸Œë¼ìš°ì €ë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ì§€ ì•Šì„ ë•Œ ë¶€ì—¬í•˜ëŠ” ì˜µì…˜
options = webdriver.ChromeOptions()
options.headless = True
options.add_argument('window-size=2560x1440')

# ì•„ë˜ì™€ ê°™ì´ User-Agentë¥¼ ì„ì˜ë¡œ ë¶€ì—¬í•˜ì§€ ì•Šìœ¼ë©´
# Chromeì´ ì•„ë‹ˆë¼ HeadlessChromeìœ¼ë¡œ ë“¤ì–´ê°€
# ì‚¬ì´íŠ¸ ì¸¡ì— ë²¤ ë‹¹í•  ìˆ˜ë„ ìˆë‹¤
options.add_argument('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36')

# ë¸Œë¼ìš°ì €ë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ì§€ ì•Šìœ¼ë©´ ì£¼ì„ ì œê±°
# driver = webdriver.Chrome(options=options)
driver = webdriver.Chrome()
```

---

<span style="font-size:120%">í•´ë‹¹ ì½”ë“œëŠ” í¬ë¡¤ëŸ¬ê°€ ì•„ë‹ˆë¼ ë‹¨ìˆœíˆ ë°ì´í„° ìˆ˜ì§‘ì„ í•˜ê¸° ìœ„í•œ ìŠ¤í¬ë˜í¼ì…ë‹ˆë‹¤.<br/>ì¦‰, ì‚¬ì´íŠ¸ì˜ êµ¬ì¡°ê°€ ë³€ê²½ë˜ë©´ ì–¸ì œë“ ì§€ ì½”ë“œê°€ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</span>

[ì›¹ í¬ë¡¤ëŸ¬ì— ëŒ€í•œ ì°¸ê³  ë¸”ë¡œê·¸](https://velog.io/@mowinckel/%EC%9B%B9-%ED%81%AC%EB%A1%A4%EB%A7%81-I)

---

<br/>

### 01. LostArk ì¸ë²¤ ìŠ¤í¬ë˜í•‘

- ê²Œì‹œíŒ : ì§ˆë¬¸ê³¼ ë‹µë³€ (í˜ì´ì§€ ë‹¹ ê²Œì‹œê¸€ 50ê°œ)
- ê²€ìƒ‰ í‚¤ì›Œë“œ : ë‰´ë¹„, ëª¨ì½”ì½”(ì¶”ê°€ ì˜ˆì •)
- ìµœê·¼ í•œë‹¬ ë‰´ë¹„ì˜ ì–´ë ¤ì›€ì— ê´€ë ¨ëœ ê²Œì‹œê¸€ì„ ëª¨ìŒ (7í˜ì´ì§€ ì •ë„)
- ì´ 350ê°œì˜ ê²Œì‹œê¸€ì„ ë°ì´í„°ë¡œ ìˆ˜ì§‘

#### 01-1. ê²Œì‹œê¸€ ë²ˆí˜¸ ê°€ì ¸ì˜¤ê¸°

- ì²˜ìŒ ìƒê°í•œ ë©”ì»¤ë‹ˆì¦˜

  - 'ë‰´ë¹„' ê²€ìƒ‰ => ê²Œì‹œê¸€ í´ë¦­ => ìŠ¤í¬ë˜í•‘ => ë’¤ë¡œê°€ê¸° => ë‹¤ìŒ ê²Œì‹œê¸€ í´ë¦­ => í˜ì´ì§€ ì´ë™

  - ìœ„ì™€ ê°™ì´ í•˜ë‹ˆ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•¨

  - ```python
    # "Message: stale element reference: element is not attached to the page document"
    ```

  - Selenium ê°ì²´ê°€ ë’¤ë¡œê°€ê¸° ê³¼ì •ì—ì„œ ìƒˆë¡œê³ ì¹¨ë˜ì–´ ë§¤ë²ˆ ê°ì²´ë¥¼ ì¬í˜¸ì¶œí•´ì•¼í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒ

  - ìœ„ì˜ ì—ëŸ¬ê°€ ë‹¤ë¥¸ ê³³ì—ì„œë„ ë°œìƒí•œë‹¤ë©´ ì½”ë“œ ì‚¬ì´ì— intervalì„ ì¤˜ì„œ ë¡œë“œê°€ ë  ë•Œê¹Œì§€ ì¡°ê¸ˆ ê¸°ë‹¤ë ¤ì¤€ë‹¤

- ë‘ ë²ˆì§¸ ë©”ì»¤ë‹ˆì¦˜
  - 'ë‰´ë¹„' ê²€ìƒ‰ => ê²Œì‹œê¸€ ë²ˆí˜¸ ìŠ¤í¬ë˜í•‘ => ë²ˆí˜¸ ë³„ url ì ‘ê·¼ => ìŠ¤í¬ë˜í•‘ => í˜ì´ì§€ ì´ë™
  - ì‘ë™ì€ ë˜ì§€ë§Œ ì´ê²ƒë³´ë‹¤ í•œ ë²ˆì— ê²Œì‹œê¸€ ë²ˆí˜¸ë¥¼ ë¶ˆëŸ¬ì˜¨ í›„ ì‘ì—…í•˜ëŠ”ê²Œ ë” ìš©ì´í•˜ë‹¤ê³  íŒë‹¨
- ì„¸ ë²ˆì§¸ ë©”ì»¤ë‹ˆì¦˜ (ì„ íƒ)
  - 'ë‰´ë¹„' ê²€ìƒ‰ => ëª¨ë“  í˜ì´ì§€ ê²Œì‹œê¸€ ë²ˆí˜¸ ìŠ¤í¬ë˜í•‘ => ë²ˆí˜¸ ë³„ url ì ‘ê·¼ => ìŠ¤í¬ë˜í•‘
- ê²Œì‹œê¸€ ë²ˆí˜¸ ìŠ¤í¬ë˜í•‘ ì½”ë“œ

```python
# ê²Œì‹œê¸€ì˜ ë²ˆí˜¸ë¥¼ ë°›ì•„ì˜¬ ë¦¬ìŠ¤íŠ¸ ì„ ì–¸
# ìµœê·¼ ê²Œì‹œê¸€ì˜ ë²ˆí˜¸ë¶€í„° ë“¤ì–´ê°€ë¯€ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ëœë‹¤
num=[]

# 7í˜ì´ì§€ (ëŒ€ëµ í•œë‹¬ ëˆ„ì  ê²Œì‹œê¸€) í™•ì¸
for i in range(1, 8):
    
    # ê²Œì‹œíŒ í˜ì´ì§€ url
    main_url = "https://www.inven.co.kr/board/lostark/4822?name=subject&keyword=%EB%89%B4%EB%B9%84&p={}".format(i)
    
    driver.get(main_url)

    # ê²Œì‹œê¸€ ë²ˆí˜¸ ë°›ì•„ì˜¤ê¸°
    # ê²Œì‹œê¸€ í•˜ë‚˜ í•˜ë‚˜ì— ì§ì ‘ ì ‘ê·¼í•˜ë ¤ê³  í•˜ë‹ˆê¹Œ
    # element is not attached to the page document ì—ëŸ¬ ë°œìƒ
    # ì´ ê²½ìš° selenium ê°ì²´ë¥¼ ë§¤ë²ˆ ìƒˆë¡œ ìƒì„±í•˜ë ¤í•˜ë‹ˆ ë¹„íš¨ìœ¨ì ì¸ ê²ƒ ê°™ì•„
    # ì°¨ë¼ë¦¬ ì²˜ìŒ ë¡œë”© ë•Œ ê²Œì‹œê¸€ ë²ˆí˜¸ë¥¼ ë°›ì€ í›„, í•´ë‹¹ ë²ˆí˜¸ë¡œ ê²Œì‹œê¸€ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´
    # ë” ìš©ì´í•˜ë‹¤ê³  íŒë‹¨
    board_num = driver.find_elements(By.CLASS_NAME, 'num')  

    for b in board_num:
        num.append(b.text)

    # CLASS_NAMEì´ numì¸ íƒœê·¸ê°€ ë˜ ì¡´ì¬í•´ì„œ ë‹¤ë¥¸ ê°’ë„ ë“¤ì–´ì˜´
    # í•„ìš”ì—†ëŠ” ê°’ë“¤ì€ ì œê±°
    # ë¹ˆ ë¬¸ìì—´ê³¼ ìµœê·¼ ê²Œì‹œê¸€ ë²ˆí˜¸ì— ë¹„í•´ ê°’ì´ ë§¤ìš° ì‘ì€ ë²ˆí˜¸ëŠ” ë‹¤ ì œì™¸
    num = [x for x in num if x and int(x) > 20] 
```

#### 01-2. ê²Œì‹œê¸€ ì œëª©, ë‚´ìš©, ëŒ“ê¸€ ê°€ì ¸ì˜¤ê¸°

- ë‰´ë¹„ ìœ ì €ë“¤ì˜ ê³ ì¶©ì„ ë¶„ì„í•˜ê¸° ìœ„í•´ ê²Œì‹œê¸€ì˜ ì œëª©, ë‚´ìš©, ëŒ“ê¸€ì„ ê°€ì ¸ì˜´
- [í•„ìš”ì—†ëŠ” íƒœê·¸ ì‚­ì œ ì°¸ê³ ](https://lovelydiary.tistory.com/17)
- [\xa0 ì‚­ì œ ì°¸ê³ ](https://stackoverflow.com/questions/10993612/how-to-remove-xa0-from-string-in-python)
- ì œëª©, ë‚´ìš©, ëŒ“ê¸€ ê°€ì ¸ì˜¤ê¸° ì½”ë“œ

```python
#  ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ”ë° ëª¨ë“  ê²Œì‹œê¸€ì„ ë‹¤ ì“°ê¸°ì—”
# í…ŒìŠ¤íŠ¸ì— ì‹œê°„ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë ¤ì„œ
# ìŠ¤í¬ë˜í•‘í•œ ê²Œì‹œë¬¼ ë²ˆí˜¸ ì¤‘ 3ê°œë§Œ ì‚¬ìš©
# num = num[:3]

# ìµœì¢…ì ìœ¼ë¡œ ëª¨ë“  ë‚´ìš©ì„ ë‹´ì„ ë¦¬ìŠ¤íŠ¸
result = []

for i in num:
    url = 'https://www.inven.co.kr/board/lostark/4822/{}?name=subject&keyword=%EB%89%B4%EB%B9%84'.format(i)

    # driver.get(url)
    res = requests.get(url, headers=headers)

    # ì—ëŸ¬ ë°œìƒì‹œ ì¢…ë£Œ
    res.raise_for_status()

    soup = BeautifulSoup(driver.page_source, 'lxml')
    
    time.sleep(random.uniform(1,3))
    
    title = soup.find("div", attrs={"class":"articleTitle"})
    content = soup.find("div", attrs={"id":"powerbbsContent"})  
    
    # ëŒ“ê¸€ì€ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ì—¬ëŸ¬ê°œ
    # find_allë¡œ ë°›ì•„ì˜¤ë©´ html íƒœê·¸ì™€ non-breaking space ì½”ë“œ(\xa0)ê°€ ê°™ì´ ë“¤ì–´ì˜´
    # ë”í‹° ë°ì´í„°ë¥¼ ìµœì†Œí™” í•˜ê¸° ìœ„í•´ ì „ì²˜ë¦¬
    # ëŒ“ê¸€ì´ ì—†ëŠ” ê²½ìš° => '' ìœ¼ë¡œ ì…ë ¥ë¨
    comment = soup.find_all("div", attrs={"class":"comment"})  
    comment = str(comment)
    comment = re.sub('<.+?>','',comment,0).strip()  # html ì œê±°
    comment = comment.replace(u'\xa0', u'')        # \xa0 ì œê±°
    comment = comment.lstrip('[').rstrip(']')            # ëŒ“ê¸€ì˜ ì–‘ ëì— []ê°€ ë”¸ë ¤ì˜¤ê¸¸ë˜ ì œê±°
    
    result.append([title.text.strip(), content.text, comment])
    
print(len(result)) # ìµœì¢… ê²°ê³¼ì˜ ê¸¸ì´ê°€ 350ì´ë©´ ì •ìƒ
```

#### 01-3. csv íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°

- ì´ ê³¼ì •ì—ì„œ ëª¨ë“  ë°ì´í„°ê°€ csvì— ë‹´ê¸°ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆìŒ

```python
today = datetime.today().strftime("%Y_%m_%d")
filename = today + 'ë¡œì•„_final.csv'

# encodingì„ ë‹¤ìŒê³¼ ê°™ì´ ì£¼ì§€ ì•Šìœ¼ë©´
# í•œê¸€ì´ ê¹¨ì ¸ ë‚˜ì˜¨ë‹¤
f = open(filename, 'w', encoding='utf-8-sig', newline='')
writer = csv.writer(f)
title = "title,content,comment".split(',')
    
writer.writerow(title)
writer.writerows(result)
```

<br/>

### 02. CSV íŒŒì¼ë¡œ ë°ì´í„° ë¶„ì„

- 01 ê³¼ì •ì—ì„œ ì¶”ì¶œí•œ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ë¶„ì„ì„ ì‹œì‘

#### 02-0. matplotilb í•œê¸€ í°íŠ¸ ê¹¨ì§ ë°©ì§€ (ì‹œìŠ¤í…œ ì˜êµ¬ ë“±ë¡)

0. í•œê¸€ í°íŠ¸ ì„¤ì¹˜ ì™„ë£Œ - [ë„¤ì´ë²„ í°íŠ¸](https://hangeul.naver.com/2017/nanum)

1. ì•„ë˜ ì½”ë“œë¡œ ì„¤ì¹˜

```python
import matplotlib as mpl
import matplotlib.pyplot as plt

# matplotlibrc íŒŒì¼ì˜ ê²½ë¡œ í™•ì¸
print(mpl.matplotlib_fname())

# ìœ„ì˜ ê²½ë¡œì— ìˆëŠ” matplotlibrc íŒŒì¼ì„ ìˆ˜ì •
# font.family ë¶€ë¶„ì˜ ì£¼ì„ì„ ì œê±°í•˜ê³ 
# sans_serif => ì›í•˜ëŠ” í°íŠ¸(ex NanumGothic)ë¡œ ë³€ê²½
# axes.unicode_minusì˜ ê°’ True => Falseë¡œ ë³€ê²½

# í•´ë‹¹ í´ë”ë¡œ ì´ë™í•˜ì—¬ ë‚´ë¶€ íŒŒì¼ ì „ë¶€ ì‚­ì œ (ìºì‹œ ì‚­ì œ)
print(mpl.get_cachedir())

# ì£¼í”¼í„° ë…¸íŠ¸ë¶ ì¬ì‹œì‘

plt.figure().add_subplot().set_title('ì•ˆë…•í•˜ì„¸ìš”')
plt.show()
```

#### 02-1. ë°ì´í„° êµ¬ì¡° íŒŒì•…

```python
import pandas as pd
import numpy as np
import seaborn as sns

# ì•ì„œ ì €ì¥í–ˆë˜ csv íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
df = pd.read_csv('2022-02-24ë¡œì•„_final.csv')

# row, col íŒŒì•…
# ê²°ì¸¡ê°’ì´ ë“¤ì–´ì˜¤ì§€ ì•Šì•„ì„œ ì˜ˆì •ëœ 350ê°œ ë³´ë‹¤ ë” ì‘ì€ 340ê°œì˜ ë°ì´í„°ê°€ ë“¤ì–´ì˜´
df.shape

# ê²°ì¸¡ì¹˜ í™•ì¸ => ì—†ìŒ
df.isnull().sum()

# ì „ì²´ ë°ì´í„° êµ¬ì¡° íŒŒì•…
df.info()

# ìƒìœ„ 5ê°œ ë°ì´í„° í™•ì¸
df.head()

# í˜¹ì‹œë‚˜ ì¤‘ë³µë˜ì–´ ë“¤ì–´ì˜¨ ë°ì´í„°ê°€ ìˆë‚˜ í™•ì¸
df = df.drop_duplicates(['title', 'content'], keep='first')

# ê¸°ì¡´ê°’ê³¼ ë³€í™” ì—†ìœ¼ë¯€ë¡œ ì¤‘ë³µëœ ë°ì´í„°ê°€ ì—†ë‹¤ê³  íŒì •
df.shape
```

#### 02-2. ë°ì´í„° ì „ì²˜ë¦¬

- KoNLPY ì„¤ì¹˜
    - [KoNLPY ì„¤ì¹˜ ì°¸ê³ ](https://konlpy.org/en/latest/install/)
    - Windowsì—ì„œ KoNLPYë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ jdk1.7 ì´ìƒì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨
        - [jdk1.8 ì„¤ì¹˜](https://www.oracle.com/java/technologies/downloads/#java8-windows)
    - pip install --upgrade pip
    - [JPype ë‹¤ìš´ë¡œë“œ](https://www.lfd.uci.edu/~gohlke/pythonlibs/#jpype)
    - pip install JPype1-1.3.0-cp39-cp39-win_amd64.whl
        - 0.5.7 ì´ìƒ, ë³¸ì¸ íŒŒì´ì¬ ë²„ì „, ìœˆë„ìš° 32 or 64 bitì— ë§ì¶°ì„œ ì„¤ì¹˜
        - whl íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ì€ ê²½ë¡œì—ì„œ í•´ë‹¹ ëª…ë ¹ì–´ ì‹¤í–‰   
    - pip install konlpy
    - [KoNLPy API](https://konlpy.org/ko/v0.4.3/morph/)
- Mecab ì„¤ì¹˜
    - [Mecab ì„¤ì¹˜ ì°¸ê³ ](https://lsjsj92.tistory.com/612)
    - [mecab-ko-msvc](https://github.com/Pusnow/mecab-ko-msvc/releases/tag/release-0.9.2-msvc-3) => ìœˆë„ìš° bitì— ë§ì¶°ì„œ ë‹¤ìš´ë¡œë“œ
    - [mecab-ko-dic-msvc.zip](https://github.com/Pusnow/mecab-ko-dic-msvc/releases/tag/mecab-ko-dic-2.1.1-20180720-msvc-2) => mecab-ko-dic-msvc.zip ë‹¤ìš´ë¡œë“œ
    - C:/ì— mecab ë””ë ‰í† ë¦¬ ìƒì„± => ìœ„ ë‘ zipíŒŒì¼ mecab ë””ë ‰í† ë¦¬ì— ì••ì¶•í•´ì œ
    - [mecab_python](https://github.com/Pusnow/mecab-python-msvc/releases/tag/mecab_python-0.996_ko_0.9.2_msvc-2)
        - ë³¸ì¸ íŒŒì´ì¬ ë²„ì ¼, ìœˆë„ìš° 32 or 64 bitì— ë§ì¶°ì„œ ì„¤ì¹˜ (3.8 ì´ìƒ ì§€ì› X)
        - pip install mecab_python-0.996_ko_0.9.2_msvc-cp37-cp37m-win_amd64.whl
        - whl íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ ë°›ì€ ê²½ë¡œì—ì„œ í•´ë‹¹ ëª…ë ¹ì–´ ì‹¤í–‰

- ì—°ìŠµ

  ```python
  from konlpy.tag import Mecab
  
  # Mecabì€ ì¼ë°˜ì ì¸ Konlpyì˜ í† í¬ë‚˜ì´ì €ì™€ëŠ” ë‹¤ë¥´ê²Œ dicpathë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì§€ì •í•´ì¤˜ì•¼í•¨
  # mecab-ko-dic-msvc.zipì˜ ì••ì¶•ì„ í‘¼ ê²½ë¡œì— ìˆìŒ
  m = Mecab('C:\mecab\mecab-ko-dic')
  m.morphs(u'ì•„ë²„ì§€ê°€ë°©ì—ë“¤ì–´ê°€ì‹ ë‹¤')
  
  # ì¶œë ¥ (list)
  # ['ì•„ë²„ì§€', 'ê°€', 'ë°©', 'ì—', 'ë“¤ì–´ê°€', 'ì‹ ë‹¤']
  ```

### 03. ì¼€ì´ìŠ¤ ë³„ WordCloud ë§Œë“¤ê¸°

#### 03-1. Case-01

- í˜•íƒœì†Œ ë¶„ì„ê¸° : Mecab
- ë„ì–´ì“°ê¸° ì²˜ë¦¬ : O (Spacing)

- ì‚¬ìš© ì»¬ëŸ¼ : ì œëª©, ë³¸ë¬¸

- ë°ì´í„° ì¢…ë¥˜ : í•œê¸€, ìˆ«ì

- RPG ê²Œì„ íŠ¹ì„±ìƒ ë ˆë²¨, ê³¼ê¸ˆ ìš”ì†Œê°€ ì˜í–¥ì„ ì¤„ ê±°ë¼ê³  íŒë‹¨í•˜ì—¬ ìˆ«ìë„ ë‚¨ê²¨ë‘ 

  ```python
  # ë°ì´í„°ë¥¼ ë¶™ì´ëŠ” ë„ì¤‘ì— ë‹¨ì–´ë¼ë¦¬ ë¶™ì–´ë²„ë¦¬ëŠ” ê²½ìš°ê°€ ìˆì–´ì„œ ê³µë°± ì¶”ê°€
  df['title_content'] = df['title'].values + ' ' + df['content'].values
  
  # í•œê¸€, ìˆ«ì ë°ì´í„°ë§Œ ë‚¨ê²¨ë‘ 
  df['ko_num_title_content'] = df['title_content'].apply(lambda x: re.sub('[^0-9ê°€-í£\s]','',x))
  
  # ko_num_title_content ì»¬ëŸ¼ì˜ ê°’ë“¤ì„ listë¡œ ë§Œë“¬
  ko_num_title_content_list = list(df['ko_num_title_content'].values)
  
  # ë„ì–´ì“°ê¸° ì²˜ë¦¬í•´ì¤€ ê°’ë“¤ì„ ë‹´ì„ list
  spacing_ko_num_title_content_list = []
  
  # PyKoSpacingë¥¼ ì‚¬ìš©í•˜ì—¬ ë„ì–´ì“°ê¸° ì ìš©
  for i in ko_num_title_content_list:
      spacing_ko_num_title_content_list.append(spacing(i))
  
  # ë„ì–´ì“°ê¸° ì ìš©í•œ ë¬¸ì¥ì˜ ëª…ì‚¬ë“¤ì„ ë‹´ì„ ë¦¬ìŠ¤íŠ¸
  spacing_ko_num_title_content_word_lst = []
  
  # ë„ì–´ì“°ê¸° ì ìš©í•œ ë¦¬ìŠ¤íŠ¸ì˜ ëª…ì‚¬ë“¤ë§Œ ë”°ë¡œ ë‹´ìŒ
  for word in spacing_ko_num_title_content_list:
      for i in range(len(m.nouns(word))):
          spacing_ko_num_title_content_word_lst.append(m.nouns(word)[i])
          
  # Counter ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ê°ê°ì˜ ê°œìˆ˜ ì„¼ í›„ ë§ì€ ìˆœì„œëŒ€ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
  from collections import Counter
  count = Counter(spacing_ko_num_title_content_word_lst)
  words_dict = dict(count)
  words_dict = sorted(words_dict.items(), key=lambda item: item[1], reverse=True)        
  
  words_dict = dict(count)
  
  # ë¶„ì„ ê²°ê³¼ë¥¼ ë³´ê¸° ìœ„í•´ WordCloud ì‚¬ìš©
  from wordcloud import WordCloud
  
  # í°íŠ¸ë¥¼ í”„ë¡œì íŠ¸ í´ë”ì— ê·¸ëƒ¥ ë³µì‚¬í•´ì„œ ë°”ë¡œ ë¶ˆëŸ¬ì˜´
  wordcloud = WordCloud(font_path='NanumBarunGothic.ttf', width=500, height=500, background_color='white').generate_from_frequencies(words_dict)
  
  # WordCloud ì¶œë ¥
  plt.figure(figsize=(7,7))
  plt.imshow(wordcloud)
  plt.axis('off')
  plt.show()
  ```

- ê²°ê³¼ WordCloud

<p align="center"><img style="width:70%" src='https://user-images.githubusercontent.com/97505799/155759219-edc6ed66-10b3-4c33-b3b8-8e75bca9ff84.png'></p>

- Case-01. ê²°ë¡ 
  - WordCloudì— ë”í‹° ë°ì´í„°ê°€ ë„ˆë¬´ ë§ìŒ
    - ë¶ˆìš©ì–´ ì„ ì •ì„ í•  ì—„ë‘ê°€ ë‚˜ì§€ ì•Šì„ ë§Œí¼ ë”í‹° ë°ì´í„°ê°€ ë§ìŒ
      - ê²Œì„ ê´€ë ¨ ê²Œì‹œê¸€ì¸ ë§Œí¼ ê³ ìœ ëª…ì‚¬ê°€ ë§ì•„ì„œ PyKoSpacingì„ ì ìš©í•˜ë©´ ë”í‹° ë°ì´í„°ê°€ ë§ì´ ë°œìƒ
      - í•´ë‹¹ ëª…ì‚¬ë“¤ì„ ë”°ë¡œ ì²˜ë¦¬í•´ì£¼ì!

#### 03-2. Case-02.

- í˜•íƒœì†Œ ë¶„ì„ê¸° : Mecab
- ë„ì–´ì“°ê¸° ì²˜ë¦¬ X
- Mecab ì‚¬ìš©ì Dict ì„¤ì •
  - (ë°©ë²• ì¶”ê°€ ì˜ˆì •)

- ì‚¬ìš© ì»¬ëŸ¼ : ì œëª©, ë³¸ë¬¸
- ë°ì´í„° ì¢…ë¥˜ : í•œê¸€, ìˆ«ì

```python
# í•œê¸€, ìˆ«ì ë°ì´í„°ë§Œ ë‚¨ê²¨ë‘ 
df['ko_num_title_content'] = df['title_content'].apply(lambda x: re.sub('[^0-9ê°€-í£\s]','',x))

# ko_num_title_content ì»¬ëŸ¼ì˜ ê°’ë“¤ì„ listë¡œ ë§Œë“¬
ko_num_title_content_list = list(df['ko_num_title_content'].values)

# ëª…ì‚¬ë“¤ì„ ë‹´ì„ ë¦¬ìŠ¤íŠ¸
ko_num_title_content_word_lst = []

for word in ko_num_title_content_list:
    for i in range(len(m.nouns(word))):
        ko_num_title_content_word_lst.append(m.nouns(word)[i])
        
# ë¶ˆìš©ì–´
# ë‰´ë¹„, ì§ˆë¬¸, ë§Œì•½, ì…ë¬¸, ì²˜ìŒê³¼ ê°™ì€ ë‹¨ì–´ë“¤ì€
# ì–´ë ¤ìš´ ì  ìì²´ì™€ëŠ” ê±°ë¦¬ê°€ ìˆëŠ” ë‹¨ì–´ë“¤ì´ê¸° ë•Œë¬¸ì—
# ë¶ˆìš©ì–´ë¡œ ì„ ì •

# ë™ìŒì´ì˜ì–´ ì„ ì • ê¸°ì¤€ => ë” ë§ì´ ë‚˜ì˜¨ ë‹¨ì–´ë¡œ ì„ ì •
# ê±´ìŠ¬ => ê±´ìŠ¬ë§ì–´ê°€ ë”°ë¡œ ìˆì–´ì„œ ë¶ˆìš©ì–´ ì„ ì •
# ìºë¦­í„° => ìºë¦­ì´ ë”°ë¡œ ìˆì–´ì„œ ë¶ˆìš©ì–´ ì„ ì •
stop_words='ë‰´ë¹„ ì§ˆë¬¸ ê·¸ê±° ê±´ ë“œ ë•Œ ë§Œ ë²ˆ ìº ì°¨ ë¶€íƒ ì¶”ì²œ ì‚¬ ì•ˆë…• \
            ë‘˜ ë”” ë§‰ ì…ë¬¸ ì²˜ìŒ ê±´ê°€ìš” ë° íŒ ë°©ë²• í•„ìš” ë­˜ íŠ¸ ì—¬ ë“±ë“± í›„ \
            ì´ê²Œ ë…¸ ì´í›„ í¬ ë§Œì•½ ë‚´ ê±´ì§€ ìŒ© ì§€ ë‚˜ ë‹¤ìŒ ë°©í–¥ ì¹´ ê±´ìŠ¬ ë¡œì•„ \
            ë¡œìŠ¤íŠ¸ì•„í¬ ì¤‘ ê²Œì„ ì‹œì‘ ê°œ ìºë¦­í„° ë­ í€˜ ì •ë„ ì—¬ê¸° ì¡°ì–¸ í˜„ì¬ ê³ ë¯¼ \
            ì € ìƒê° ê¸€ ì œ ê²ƒ'

# ë¶ˆìš©ì–´ ì ìš©
ko_num_title_content_word_lst = [word for word in ko_num_title_content_word_lst
                                    			if not word in stop_words]

# Counter ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë‹¨ì–´ì˜ ë¹ˆë„ìˆ˜ ì²´í¬ í›„ ë§ì€ ìˆœì„œëŒ€ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
from collections import Counter
count = Counter(ko_num_title_content_word_lst)
words_dict = dict(count)
words_dict = sorted(words_dict.items(), key=lambda item: item[1], reverse=True)

# ì •ë ¬ í›„ listë¡œ ë°˜í™˜ë˜ì–´ ë‹¤ì‹œ dictë¡œ ë³€í™˜
words_dict = dict(count)

from wordcloud import WordCloud
# í°íŠ¸ë¥¼ í”„ë¡œì íŠ¸ í´ë”ì— ê·¸ëƒ¥ ë³µì‚¬í•´ì„œ ë°”ë¡œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.
wordcloud = WordCloud(font_path='NanumBarunGothic.ttf', 
                      min_font_size=7, max_font_size=150,
                      margin=3, width=500, height=500,
                      background_color='white').generate_from_frequencies(words_dict)

# WordCloud ì¶œë ¥
plt.figure(figsize=(10,10))
plt.imshow(wordcloud)
plt.axis('off')
plt.show()
```

- ê²°ê³¼ WorldCloud

<p align="center"><img style="width:70%" src='https://user-images.githubusercontent.com/97505799/155831438-e1e3cf20-9c75-4926-af01-378780fe2c75.png'></p>

- Case-02. ê²°ë¡ 
  - ë„ì–´ì“°ê¸°ë¥¼ í•˜ì§€ ì•Šê³  Mecabì˜ ì‚¬ìš©ì Dictionaryë¥¼ ì‚¬ìš©í•˜ë‹ˆ í™•ì‹¤íˆ ë”í‹° ë°ì´í„°ê°€ ì¤„ì–´ë“¦
  - ì§ì—… ê³ ë¯¼ì— ëŒ€í•œ ê³ ë¯¼ì´ ì—­ì‹œ ë§ê³ , ë‰´ë¹„ë“¤ì—ê²Œ í•˜ìµ, ìŠ¤ìµê³¼ ê°™ì€ ì í•‘ ìµìŠ¤í”„ë ˆìŠ¤ ì‹œìŠ¤í…œì´ ìƒê°ë³´ë‹¤ ì–´ë µê²Œ ëŠê»´ì§































